(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{382:function(a,s,e){"use strict";e.r(s);var t=e(8),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"应急响应-apache日志分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应急响应-apache日志分析"}},[a._v("#")]),a._v(" 应急响应-apache日志分析")]),a._v(" "),s("p",[a._v("需求：")]),a._v(" "),s("ul",[s("li",[a._v("1、提交当天访问次数最多的IP，即黑客IP：")]),a._v(" "),s("li",[a._v("2、黑客使用的浏览器指纹是什么，提交指纹的md5：")]),a._v(" "),s("li",[a._v("3、查看index.php页面被访问的次数，提交次数：")]),a._v(" "),s("li",[a._v("4、查看黑客IP访问了多少次，提交次数：")]),a._v(" "),s("li",[a._v("5、查看2023年8月03日8时这一个小时内有多少IP访问，提交次数:")])]),a._v(" "),s("p",[a._v("连接后，判断apache的日志目录，常见目录")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("/var/log/httpd/")])]),a._v(" "),s("li",[s("p",[a._v("/var/log/apache/")])]),a._v(" "),s("li",[s("p",[a._v("/var/log/apache2/")])])]),a._v(" "),s("p",[a._v("通过ls可以发现题目的apache日志目录为/var/log/apache2/")]),a._v(" "),s("h2",{attrs:{id:"_1、提交当天访问次数最多的ip-即黑客ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、提交当天访问次数最多的ip-即黑客ip"}},[a._v("#")]),a._v(" 1、提交当天访问次数最多的IP，即黑客IP：")]),a._v(" "),s("p",[a._v("ls命令列出详细信息")]),a._v(" "),s("p",[a._v("访问日志："),s("code",[a._v("access.log")]),a._v("是空日志，备份在"),s("code",[a._v("access.log.1")])]),a._v(" "),s("p",[a._v("错误日志："),s("code",[a._v("error.log")]),a._v("是空日志，备份在"),s("code",[a._v("error.log.1")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-lah")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("在日志里记录其中可能是:")]),a._v(" "),s("p",[a._v("第一个字段就是ip，用awk命令打出来")]),a._v(" "),s("div",{staticClass:"language-plaintext line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-plaintext"}},[s("code",[a._v('192.168.1.100 - - [27/Nov/2024:12:34:56 +0000] "GET /index.html HTTP/1.1" 200 1024 "http://example.com" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36"\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("可以使用awk、grep命令过滤统计ip访问次数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" access.log.1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $1}'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sort")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("uniq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sort")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-nr")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("内网192.168.200.2 这小子爆破了6555次")]),a._v(" "),s("p",[a._v("flag{192.168.200.2}")]),a._v(" "),s("h2",{attrs:{id:"_2、黑客使用的浏览器指纹是什么-提交指纹的md5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、黑客使用的浏览器指纹是什么-提交指纹的md5"}},[a._v("#")]),a._v(" 2、黑客使用的浏览器指纹是什么，提交指纹的md5：")]),a._v(" "),s("p",[a._v("找出一条完整记录")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" access.log.1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"192.168.200.2"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tail")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("它的浏览器指纹就是"),s("code",[a._v('md5("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.360")')])]),a._v(" "),s("div",{staticClass:"language-plaintext line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-plaintext"}},[s("code",[a._v('192.168.200.2 - - [03/Aug/2023:08:46:45 +0000] "GET /id_rsa.pub HTTP/1.1" 404 492 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36"\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("flag{811ef4675b962510cfaa35cc277484d3}")]),a._v(" "),s("h2",{attrs:{id:"_3、查看index-php页面被访问的次数-提交次数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、查看index-php页面被访问的次数-提交次数"}},[a._v("#")]),a._v(" 3、查看index.php页面被访问的次数，提交次数：")]),a._v(" "),s("p",[a._v("不要搜索"),s("code",[a._v("index.php")]),a._v("，其他目录也可能存在"),s("code",[a._v("index.php")]),a._v("，会增加正确被访问的次数")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/index.php"')]),a._v(" access.log.1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("flag{27}")]),a._v(" "),s("h2",{attrs:{id:"_4、查看黑客ip访问了多少次-提交次数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、查看黑客ip访问了多少次-提交次数"}},[a._v("#")]),a._v(" 4、查看黑客IP访问了多少次，提交次数：")]),a._v(" "),s("p",[a._v("第一题已经得到次数")]),a._v(" "),s("p",[a._v("flag{6555}")]),a._v(" "),s("h2",{attrs:{id:"_5、查看2023年8月03日8时这一个小时内有多少ip访问-提交次数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、查看2023年8月03日8时这一个小时内有多少ip访问-提交次数"}},[a._v("#")]),a._v(" 5、查看2023年8月03日8时这一个小时内有多少IP访问，提交次数:")]),a._v(" "),s("p",[a._v("2023年8月03日8时 在日志里的时间格式可能是"),s("code",[a._v("day/month/year:hour")]),a._v("，所以这里是"),s("code",[a._v("03/Aug/2023:08:")])]),a._v(" "),s("p",[a._v("提取统计")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" access.log.1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"03/Aug/2023:08:"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $1}'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("flag{6591}")]),a._v(" "),s("p",[a._v("参考：")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.csdn.net/administratorlws/article/details/139574366",target:"_blank",rel:"noopener noreferrer"}},[a._v("玄机——第二章 日志分析-apache日志分析 wp"),s("OutboundLink")],1)]),a._v(" "),s("li",[s("a",{attrs:{href:"https://lexsd6.github.io/2024/07/10/%E7%AC%AC%E4%BA%8C%E7%AB%A0-/",target:"_blank",rel:"noopener noreferrer"}},[a._v("第二章-日志分析-apache日志分析-玄机靶场"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);