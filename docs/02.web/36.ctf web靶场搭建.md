---
title: CTF Webé¶åœºæ­å»º
date: 2025-11-9 12:10:01
permalink: /pages/ctf-web-target/
categories:
  - web
tags:
  - GZCTF
author: 
  name: the0n3
  link: https://the0n3.top
---



ctfé¶åœºæ­å»º

ä»‹ç»ï¼šä½¿ç”¨Debian12ç³»ç»Ÿï¼Œé€šè¿‡dockeræ­å»ºGZCTFå¹³å°ï¼Œå¹¶éƒ¨ç½²å¤šä¸ªCTFé¶åœºï¼Œå¯¼å‡ºè™šæ‹Ÿæœºä¾›æ–°äººåœ¨è‡ªå·±çš„ä¸»æœºä¸Šå¯¼å…¥ä½¿ç”¨ï¼Œç¯å¢ƒéš”ç¦»ï¼Œæ–¹ä¾¿å¿«æ·ï¼Œç§»å‡ºæ–°äººå­¦ä¹ CTF webæ–¹å‘æ—¶çš„ç¯å¢ƒæ­å»ºé—®é¢˜ã€‚

æ¯”è¾ƒé—æ†¾çš„æ˜¯æ²¡æœ‰æˆªå›¾è®°å½•


![](/medias/GZCTF/10.png)

![](/medias/GZCTF/11.png)



## é…ç½®

ç³»ç»Ÿï¼šdebian 12

ç”¨æˆ·ï¼šroot,welcome


root
letme1n!!!

welcome
welcome2the0n3.top


GZCTFç®¡ç†å‘˜
ç”¨æˆ·åï¼šadmin
å¯†ç ï¼šAdmin123..

GZCTFå·¥ä½œç›®å½•ï¼š /root/
appsettings.jsonæ¨¡æ¿æ–‡ä»¶è·¯å¾„ï¼š /root/appsettings.json.template
compose.ymlæ–‡ä»¶è·¯å¾„ï¼š /root/compose.yml
ipæ›¿æ¢è„šæœ¬è·¯å¾„ï¼š /root/replace_ip.sh
IPæ›¿æ¢æ³¨å†Œä¸ºå¼€æœºå¯åŠ¨ä»»åŠ¡ï¼š/etc/systemd/system/ctf.service

## æµç¨‹

1. aptæ¢æº
2. å®‰è£…dockerã€docker compose
3. é…ç½® docker é•œåƒåŠ é€Ÿ
4. æ­å»ºé…ç½® GZCTF å¹³å°
5. æ‹‰å–DVWA,sqlilabs,pikachu,rce-labsç­‰é¶åœºé•œåƒ
6. è®¾ç½®å¼€æœºæ¨ªå¹…å†…å®¹ï¼Œæ˜¾ç¤ºé¶æœºip
7. æ¸…é™¤å‘½ä»¤å†å²è®°å½•


ä»¥ä¸‹æµç¨‹åœ¨rootç”¨æˆ·å®¶ç›®å½•è¿›è¡Œï¼Œå®é™…æµç¨‹å¯èƒ½æ²¡æœ‰æŒ‰ç…§ä¸Šé¢é¡ºåºè¿›è¡Œï¼Œä½†æœ€ç»ˆæ•ˆæœä¸€è‡´ã€‚

## æ¢æº

ä¸­ç§‘å¤§é•œåƒæº

```bash
sed -i 's/deb.debian.org/mirrors.ustc.edu.cn/g' /etc/apt/sources.list
```

å‚è€ƒï¼š

https://mirrors.ustc.edu.cn/help/debian.html

## å®‰è£…dockerã€docker compose

ä½¿ç”¨dockerå®˜æ–¹è„šæœ¬å®‰è£…docker

```bash
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
```

éªŒè¯å®‰è£…æˆåŠŸ

```bash
root@debian:~# docker -v
Docker version 28.5.2, build ecc6942
root@debian:~# docker compose version
Docker Compose version v2.40.3
```

## é…ç½® docker é•œåƒåŠ é€Ÿ

```bash
mkdir -p /etc/docker
cat > /etc/docker/daemon.json <<-EOF
{
  "registry-mirrors": ["https://docker.the0n3.top/"]
}
EOF
systemctl daemon-reload
systemctl restart docker
```

å‚è€ƒï¼š

https://www.runoob.com/docker/debian-docker-install.html

## æ­å»º GZCTF å¹³å°


å‡†å¤‡äº†ä»¥ä¸‹å‚æ•°

```plaintext
GZCTF_ADMIN_PASSWORD: Admin123..ï¼ˆGZCTFç®¡ç†å‘˜å¯†ç ï¼‰
POSTGRES_PASSWORD: gzctf123.. ï¼ˆæ•°æ®åº“å¯†ç ï¼‰
XOR_KEY: thisXorKey  ï¼ˆåŠ å¯†æ¯”èµ›çš„éšæœºå­—ç¬¦ä¸²ï¼‰
PUBLIC_ENTRY: 192.168.237.140 ï¼ˆè™šæ‹Ÿæœºipï¼‰
```

> å…¥å£è™šæ‹Ÿæœºipçš„é—®é¢˜ï¼Œæˆ‘è¯¥æ€ä¹ˆè§£å†³..?æœ‰äº†ï¼Œå‡†å¤‡ä¸€ä»½æ¨¡æ¿é…ç½®æ–‡ä»¶ï¼Œipä½¿ç”¨ä¸€ä¸ªä¸é‡å¤çš„å˜é‡å`___GZCTF_PUBLIC_IP___`å ä½ï¼Œæ¯æ¬¡å¼€æœºæ£€æŸ¥ipï¼ŒæŠŠå®é™…ipæ›¿æ¢åˆ°æ¨¡æ¿é…ç½®æ–‡ä»¶ä¸­ï¼Œç”Ÿæˆä¸€ä»½æ–°çš„é…ç½®æ–‡ä»¶ä½¿ç”¨

å†™å…¥appsettings.json.template

```bash
sudo vim appsettings.json
```

```json
{
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "Database": "Host=db:5432;Database=gzctf;Username=postgres;Password=gzctf123.."
  },
  "EmailConfig": {
    "SenderAddress": "",
    "SenderName": "",
    "UserName": "",
    "Password": "",
    "Smtp": {
      "Host": "localhost",
      "Port": 587
    }
  },
  "XorKey": "thisXorKey",
  "ContainerProvider": {
    "Type": "Docker",
    "PortMappingType": "Default",
    "EnableTrafficCapture": false,
    "PublicEntry": "___GZCTF_PUBLIC_IP___",

    "DockerConfig": {
      "SwarmMode": false,
      "Uri": "unix:///var/run/docker.sock"
    }
  },
  "RequestLogging": false,
  "DisableRateLimit": true,
  "RegistryConfig": {
    "UserName": "",
    "Password": "",
    "ServerAddress": ""
  },
  "CaptchaConfig": {
    "Provider": "None",
    "SiteKey": "<Your SITE_KEY>",
    "SecretKey": "<Your SECRET_KEY>",
    "GoogleRecaptcha": {
      "VerifyAPIAddress": "https://www.recaptcha.net/recaptcha/api/siteverify",
      "RecaptchaThreshold": "0.5"
    }
  },
  "ForwardedOptions": {
    "ForwardedHeaders": 7,
    "ForwardLimit": 1,
    "TrustedNetworks": ["192.168.12.0/8"]
  }
}
```

compose.yml

```yaml
services:
  gzctf:
    image: registry.cn-shanghai.aliyuncs.com/gztime/gzctf:develop
    restart: always
    environment:
      - "GZCTF_ADMIN_PASSWORD=Admin123.."   # GZCTF admin password
      # choose your backend language `en_US` / `zh_CN` / `ja_JP`
      - "LC_ALL=zh_CN.UTF-8"
    ports:
      - "80:8080"
    volumes:
      - "./data/files:/app/files"
      - "./appsettings.json:/app/appsettings.json:ro"
      # - "./kube-config.yaml:/app/kube-config.yaml:ro" # this is required for k8s deployment
      - "/var/run/docker.sock:/var/run/docker.sock" # this is required for docker deployment
    depends_on:
      - db

  db:
    image: postgres:alpine
    restart: always
    environment:
      - "POSTGRES_PASSWORD=gzctf123.."   # database password
    volumes:
      - "./data/db:/var/lib/postgresql/data"
```


### å¼€æœºæ¨ªå¹…

```bash
vim /root/issue.template
```

å¯ä»¥åœ¨è¿™ä¸ªç«™ç‚¹ç”Ÿæˆ è‰ºæœ¯å­—ascll [https://www.asciiart.eu/text-to-ascii-art](https://www.asciiart.eu/text-to-ascii-art)


è‡ªå®šä¹‰æ¨ªå¹…å†…å®¹

```plaintext
Web Virtual Lab
VM IP:  __GZCTF_PUBLIC_IP__    

username: admin
password: Admin123..
```


### æ³¨å†Œå¼€æœºè‡ªå¯æœåŠ¡


æ³¨å†Œå®šæ—¶ä»»åŠ¡ï¼Œæ¯æ¬¡å¼€æœºæ—¶ï¼Œæ›¿æ¢é¶æœºipåœ°å€ï¼Œç¡®ä¿å…¥å£æ­£ç¡®

```bash
vim /etc/systemd/system/ctf.service
```

å†…å®¹

```ini
[Unit]
Description=GZCTF Platform Auto-Configuration and Start
# ç¡®ä¿åœ¨ç½‘ç»œè¿æ¥å°±ç»ªåæ‰è¿è¡Œ
After=network-online.target
# ç¡®ä¿åœ¨ Docker æœåŠ¡å¯åŠ¨åæ‰è¿è¡Œï¼Œå› ä¸ºè„šæœ¬éœ€è¦æ‰§è¡Œ docker-compose å‘½ä»¤
After=docker.service
Requires=docker.service
 
[Service]
# Type=oneshot è¡¨ç¤ºä»»åŠ¡æ‰§è¡Œä¸€æ¬¡å°±ç»“æŸï¼Œä¸ä¼šå¸¸é©»å†…å­˜
Type=oneshot
# è„šæœ¬çš„ç»å¯¹è·¯å¾„
ExecStart=/root/replace-ip.sh
# ç¡®ä¿è„šæœ¬ä»¥ root æƒé™è¿è¡Œï¼Œå› ä¸ºéœ€è¦ä¿®æ”¹ /etc/docker å’Œæ‰§è¡Œ docker å‘½ä»¤
User=root
 
[Install]
# æœåŠ¡å°†åœ¨å¤šç”¨æˆ·æ¨¡å¼ä¸‹å¯åŠ¨æ—¶è¢«æ¿€æ´»
WantedBy=multi-user.target
```

è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™

```bash
chmod +x /root/replace-ip.sh
```

è„šæœ¬å†…å®¹ï¼š

```bash
#!/bin/bash

# è·å–ä¸»æœº IPï¼ˆæ’é™¤ 127.0.0.1 å’Œ docker ç½‘ç»œï¼‰
CURRENT_IP=$(ip -4 addr show | grep -v "127.0.0.1" | grep -v "docker" | grep -oP 'inet \K[\d.]+' | head -n 1)

if [ -z "$CURRENT_IP" ]; then
    echo "Could not detect a valid external/host IP address."
    exit 1
else
    echo "Host IP Address: $CURRENT_IP"
fi

# å®šä¹‰å±…ä¸­å‡½æ•°
center() {
    termwidth=$(tput cols 2>/dev/null || echo 80)
    while IFS= read -r line; do
        printf "%*s\n" $(( (${#line} + termwidth) / 2 )) "$line"
    done
}

# ç”Ÿæˆæœ€ç»ˆæ¨ªå¹…ï¼ˆ/etc/issueï¼‰ï¼Œå±…ä¸­æ˜¾ç¤º
sed "s/___GZCTF_PUBLIC_IP___/$CURRENT_IP/g" /root/issue.template | center > /etc/issue
chmod 644 /etc/issue

# é‡å¯ getty æœåŠ¡ä»¥åº”ç”¨æ–°çš„æ¨ªå¹…
setfont /usr/share/consolefonts/Lat2-TerminusBold28x14.psf.gz
systemctl restart getty@tty1.service


# æ›´æ–° appsettings.json
cp /root/appsettings.json.template /root/appsettings.json
sed -i "s/___GZCTF_PUBLIC_IP___/$CURRENT_IP/g" /root/appsettings.json

# åœæ­¢/æ¸…ç†åº”ç”¨
cd /root/
docker compose down >> /root/docker-compose.log 2>&1
# é‡æ–°å¯åŠ¨
docker compose up -d >> /root/docker-compose.log 2>&1



# æ—¥å¿—è®°å½•
echo "replace-ip.sh run successfully $(date)" >> /root/ctf-startup.log

# æ—¥å¿—æ¸…ç†
find /root/ -type f -name "*.log-*" -mtime +7 -delete
echo "--- æ—¥å¿—æ¸…ç†å®Œæˆ ---" >> /root/ctf-startup.log
```



é‡æ–°åŠ è½½ systemd é…ç½®

```bash
systemctl daemon-reload
```

å¼€æœºè‡ªå¯

```bash
systemctl enable ctf.service
```

ç«‹å³æ‰§è¡Œï¼Œæµ‹è¯•æ˜¯å¦å­˜åœ¨é”™è¯¯

```bash
systemctl start ctf.service
```



åˆ›å»ºå¯åŠ¨ GZCTF

```bash
docker compose up -d
```




## æ‹‰å–é¢˜ç›®é•œåƒ


### é›†æˆé¶åœº

rce-labs ç³»åˆ—

```bash
docker pull the0n3/rce-labs:latest
```

https://github.com/NUDTTAN91/GZCTF-Challenges


DVWA ç³»åˆ—

```bash
docker pull vulnerables/web-dvwa
```

pikachu ç³»åˆ—

```bash
docker pull area39/pikachu:latest
```

sqlilabs ç³»åˆ—

```bash
docker pull c0ny1/sqli-labs:0.1
```


### å•å…³å¡é¶åœº


md5bypass ç³»åˆ—

```bash
docker pull nudttan91/md5bypass:pass01_gzctf
docker pull nudttan91/md5bypass:pass02_gzctf
docker pull nudttan91/md5bypass:pass03_gzctf
docker pull nudttan91/md5bypass:pass04_gzctf
docker pull nudttan91/md5bypass:pass05_gzctf
docker pull nudttan91/md5bypass:pass06_gzctf
docker pull nudttan91/md5bypass:pass07_gzctf
docker pull nudttan91/md5bypass:pass08_gzctf
```





sqli-labs ç³»åˆ—

```bash
docker pull nudttan91/sqli_labs_gzctf:less01
docker pull nudttan91/sqli_labs_gzctf:less02
docker pull nudttan91/sqli_labs_gzctf:less03
docker pull nudttan91/sqli_labs_gzctf:less04
docker pull nudttan91/sqli_labs_gzctf:less05
docker pull nudttan91/sqli_labs_gzctf:less06
docker pull nudttan91/sqli_labs_gzctf:less07
docker pull nudttan91/sqli_labs_gzctf:less08
docker pull nudttan91/sqli_labs_gzctf:less09
docker pull nudttan91/sqli_labs_gzctf:less10
docker pull nudttan91/sqli_labs_gzctf:less11
docker pull nudttan91/sqli_labs_gzctf:less12
docker pull nudttan91/sqli_labs_gzctf:less13
docker pull nudttan91/sqli_labs_gzctf:less14
docker pull nudttan91/sqli_labs_gzctf:less15
docker pull nudttan91/sqli_labs_gzctf:less16
docker pull nudttan91/sqli_labs_gzctf:less17
docker pull nudttan91/sqli_labs_gzctf:less18
docker pull nudttan91/sqli_labs_gzctf:less19
docker pull nudttan91/sqli_labs_gzctf:less20
docker pull nudttan91/sqli_labs_gzctf:less21
docker pull nudttan91/sqli_labs_gzctf:less22
docker pull nudttan91/sqli_labs_gzctf:less23
docker pull nudttan91/sqli_labs_gzctf:less24
docker pull nudttan91/sqli_labs_gzctf:less25
docker pull nudttan91/sqli_labs_gzctf:less25a
docker pull nudttan91/sqli_labs_gzctf:less26
docker pull nudttan91/sqli_labs_gzctf:less26a
docker pull nudttan91/sqli_labs_gzctf:less27
docker pull nudttan91/sqli_labs_gzctf:less27a
docker pull nudttan91/sqli_labs_gzctf:less28
docker pull nudttan91/sqli_labs_gzctf:less28a
docker pull nudttan91/sqli_labs_gzctf:less29
docker pull nudttan91/sqli_labs_gzctf:less30
docker pull nudttan91/sqli_labs_gzctf:less31
docker pull nudttan91/sqli_labs_gzctf:less32
docker pull nudttan91/sqli_labs_gzctf:less33
docker pull nudttan91/sqli_labs_gzctf:less34
docker pull nudttan91/sqli_labs_gzctf:less35
docker pull nudttan91/sqli_labs_gzctf:less36
docker pull nudttan91/sqli_labs_gzctf:less37
docker pull nudttan91/sqli_labs_gzctf:less38
docker pull nudttan91/sqli_labs_gzctf:less39
docker pull nudttan91/sqli_labs_gzctf:less40
docker pull nudttan91/sqli_labs_gzctf:less41
docker pull nudttan91/sqli_labs_gzctf:less42
docker pull nudttan91/sqli_labs_gzctf:less43
docker pull nudttan91/sqli_labs_gzctf:less44
docker pull nudttan91/sqli_labs_gzctf:less45
docker pull nudttan91/sqli_labs_gzctf:less46
docker pull nudttan91/sqli_labs_gzctf:less47
docker pull nudttan91/sqli_labs_gzctf:less48
docker pull nudttan91/sqli_labs_gzctf:less49
docker pull nudttan91/sqli_labs_gzctf:less50
docker pull nudttan91/sqli_labs_gzctf:less51
docker pull nudttan91/sqli_labs_gzctf:less52
docker pull nudttan91/sqli_labs_gzctf:less53
docker pull nudttan91/sqli_labs_gzctf:less54
docker pull nudttan91/sqli_labs_gzctf:less55
docker pull nudttan91/sqli_labs_gzctf:less56
docker pull nudttan91/sqli_labs_gzctf:less57
docker pull nudttan91/sqli_labs_gzctf:less58
docker pull nudttan91/sqli_labs_gzctf:less59
docker pull nudttan91/sqli_labs_gzctf:less60
docker pull nudttan91/sqli_labs_gzctf:less61
docker pull nudttan91/sqli_labs_gzctf:less62
docker pull nudttan91/sqli_labs_gzctf:less63
docker pull nudttan91/sqli_labs_gzctf:less64
docker pull nudttan91/sqli_labs_gzctf:less65
```

upload-labs ç³»åˆ—

```bash
docker pull nudttan91/upload_labs_gzctf:pass01
docker pull nudttan91/upload_labs_gzctf:pass02
docker pull nudttan91/upload_labs_gzctf:pass03
docker pull nudttan91/upload_labs_gzctf:pass04
docker pull nudttan91/upload_labs_gzctf:pass05
docker pull nudttan91/upload_labs_gzctf:pass06
docker pull nudttan91/upload_labs_gzctf:pass07
docker pull nudttan91/upload_labs_gzctf:pass08
docker pull nudttan91/upload_labs_gzctf:pass09
docker pull nudttan91/upload_labs_gzctf:pass10
docker pull nudttan91/upload_labs_gzctf:pass11
docker pull nudttan91/upload_labs_gzctf:pass12
docker pull nudttan91/upload_labs_gzctf:pass13
docker pull nudttan91/upload_labs_gzctf:pass14
docker pull nudttan91/upload_labs_gzctf:pass15
docker pull nudttan91/upload_labs_gzctf:pass16
docker pull nudttan91/upload_labs_gzctf:pass17
docker pull nudttan91/upload_labs_gzctf:pass18
docker pull nudttan91/upload_labs_gzctf:pass19
docker pull nudttan91/upload_labs_gzctf:pass20
docker pull nudttan91/upload_labs_gzctf:pass21
```


### sqlilabs æ‰¹é‡ä¸Šé¢˜


sqlilabå•å…µé¶åœº

æµè§ˆå™¨æ§åˆ¶å°æ‰¹é‡ä¸Šé¢˜ï¼Œæ³¨æ„ä¸€å®šè¦ä¿®æ”¹ip

```javascript
// æ³¨æ„ games/{id}/ ï¼Œè¿™é‡Œçš„idæ˜¯æ¯”èµ›çš„æ¬¡åºï¼Œå³ä½¿åˆ é™¤ä¹‹å‰çš„é¢˜ç›®ï¼Œidä¹Ÿä¼šé€’å¢
const baseUrl = "http://192.168.219.143/api/edit/games/2/challenges";

// æ‰€æœ‰é¢˜ç›®åç§°ï¼ŒåŒ…æ‹¬å¸¦ a çš„å…³å¡
const challengeNames = [
  "less01","less02","less03","less04","less05","less06","less07","less08","less09","less10",
  "less11","less12","less13","less14","less15","less16","less17","less18","less19","less20",
  "less21","less22","less23","less24","less25","less25a","less26","less26a","less27","less27a",
  "less28","less28a","less29","less30","less31","less32","less33","less34","less35","less36",
  "less37","less38","less39","less40","less41","less42","less43","less44","less45","less46",
  "less47","less48","less49","less50","less51","less52","less53","less54","less55","less56",
  "less57","less58","less59","less60","less61","less62","less63","less64","less65"
];

// å»¶æ—¶å‡½æ•°
const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));

// 1ï¸âƒ£ åˆ›å»ºé¢˜ç›®
async function createChallenge(title) {
  const res = await fetch(baseUrl, {
    method: "POST",
    headers: { "accept": "application/json, text/plain, */*", "content-type": "application/json" },
    credentials: "include",
    body: JSON.stringify({ title, category: "Web", type: "DynamicContainer" })
  });
  const data = await res.json();
  console.log(`âœ… å·²åˆ›å»ºé¢˜ç›® "${title}"ï¼ŒID: ${data.id}`);
  return data.id;
}

// 2ï¸âƒ£ é…ç½®é¢˜ç›®ä¿¡æ¯
async function updateChallenge(id, title) {
  const body = {
    id,
    title,
    content: "",
    category: "Web",
    type: "DynamicContainer",
    hints: [],
    flagTemplate: null,
    acceptedCount: 0,
    fileName: "attachment",
    attachment: null,
    testContainer: null,
    flags: [],
    containerImage: `nudttan91/sqli_labs_gzctf:${title}`,
    memoryLimit: 64,
    cpuCount: 1,
    storageLimit: 256,
    containerExposePort: 80,
    enableTrafficCapture: false,
    disableBloodBonus: false,
    submissionLimit: 0,
    originalScore: 1000,
    minScoreRate: 0.25,
    difficulty: 5
  };

  await fetch(`${baseUrl}/${id}`, {
    method: "PUT",
    headers: { "accept": "application/json, text/plain, */*", "content-type": "application/json" },
    credentials: "include",
    body: JSON.stringify(body)
  });

  console.log(`âš™ å·²æ›´æ–°é¢˜ç›® "${title}" çš„è¯¦ç»†ä¿¡æ¯`);
}

// 3ï¸âƒ£ é…ç½® flag æ¨¡æ¿
async function setFlagTemplate(id, flag = "flag{[GUID]}") {
  await fetch(`${baseUrl}/${id}`, {
    method: "PUT",
    headers: { "accept": "application/json, text/plain, */*", "content-type": "application/json" },
    credentials: "include",
    body: JSON.stringify({ flagTemplate: flag })
  });
  console.log(`ğŸ· å·²ä¸ºé¢˜ç›® ID ${id} è®¾ç½® flag æ¨¡æ¿`);
}

// 4ï¸âƒ£ æ‰¹é‡å¤„ç†
async function batchSetup() {
  for (const name of challengeNames) {
    try {
      const id = await createChallenge(name);
      await sleep(200); // ç­‰å¾… 200ms
      await updateChallenge(id, name);
      await sleep(200);
      await setFlagTemplate(id);
      await sleep(200);
    } catch (err) {
      console.error(`âŒ å¤„ç†é¢˜ç›® "${name}" æ—¶å‘ç”Ÿé”™è¯¯:`, err);
    }
  }
  console.log("ğŸ‰ æ‰€æœ‰é¢˜ç›®å¤„ç†å®Œæˆï¼");
}

// æ‰§è¡Œ
batchSetup();
```


### sqlilabs æ‰¹é‡é…ç½®flagæ¨¡æ¿

```javascript
// é¢˜ç›® ID æ•°ç»„ï¼Œè¿™é‡Œç¤ºä¾‹ç”¨ 1~65
const challengeIds = Array.from({ length: 65 }, (_, i) => i + 1);

const setFlagTemplate = async (id) => {
  const url = `http://192.168.219.143/api/edit/games/2/challenges/${id}`;
  const body = JSON.stringify({ flagTemplate: "flag{[GUID]}" });

  try {
    const res = await fetch(url, {
      method: "PUT",
      headers: {
        "accept": "application/json, text/plain, */*",
        "content-type": "application/json",
      },
      body,
      credentials: "include",
    });

    if (res.ok) {
      console.log(`Challenge ${id} flagTemplate updated successfully`);
    } else {
      console.error(`Challenge ${id} update failed: ${res.status}`);
    }
  } catch (err) {
    console.error(`Challenge ${id} update error:`, err);
  }
};

// é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç”¨ Promise.all å¹¶å‘æ‰§è¡Œ
(async () => {
  for (const id of challengeIds) {
    await setFlagTemplate(id);
  }
})();
```

### æ¥å£æ‰¹é‡å¯ç”¨é¢˜ç›®

```javascript
const gameId = 2; // æ‚¨çš„ç›®æ ‡æ¸¸æˆ ID
const baseUrl = `http://192.168.219.143/api/edit/games`;

async function getAllChallenges() {
    // ä½¿ç”¨æ‚¨å·²éªŒè¯æˆåŠŸçš„é€»è¾‘è·å–æ‰€æœ‰é¢˜ç›®
    const res = await fetch(`${baseUrl}/${gameId}/challenges`, {
        method: 'GET',
        headers: { 'accept': 'application/json, text/plain, */*', },
        credentials: 'include'
    });
    if (!res.ok) {
        console.error('âŒ è·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥:', res.status, res.statusText);
        return [];
    }
    const challenges = await res.json();
    console.log(`âœ… å…±è·å–åˆ° ${challenges.length} ä¸ªé¢˜ç›®ï¼Œå‡†å¤‡æ‰¹é‡å¯ç”¨...`);
    return challenges;
}

async function enableChallenge(challengeId) {
    // å¯ç”¨å•ä¸ªé¢˜ç›®çš„ API åœ°å€æ˜¯ï¼š/api/edit/challenges/{challengeId}ï¼Œå®ƒç‹¬ç«‹äº GameIdã€‚
    // GZCTF çš„ PUT /api/edit/games/{gameId}/challenges/{challengeId} æ˜¯æ›´æ–°é¢˜ç›®å±æ€§çš„ç«¯ç‚¹ã€‚
    // ä¸ºäº†å¯ç”¨ï¼Œæˆ‘ä»¬å‘é€ isEnabled: true
    const enableUrl = `${baseUrl}/${gameId}/challenges/${challengeId}`;

    const res = await fetch(enableUrl, {
        method: "PUT",
        headers: {
            "accept": "application/json, text/plain, */*",
            "content-type": "application/json"
        },
        // å¯ç”¨é¢˜ç›®ï¼šisEnabled: true
        body: JSON.stringify({ isEnabled: true }), 
        credentials: "include"
    });

    if (res.ok) {
        console.log(`âœ… é¢˜ç›® ID: ${challengeId} å·²å¯ç”¨ã€‚`);
    } else {
        console.error(`âŒ é¢˜ç›® ID: ${challengeId} å¯ç”¨å¤±è´¥ã€‚çŠ¶æ€ç : ${res.status}`);
    }
}

async function enableAllChallengesInGame() {
    const challenges = await getAllChallenges();

    if (challenges.length === 0) {
        console.log("ğŸš« æ— é¢˜ç›®å¯å¯ç”¨ã€‚");
        return;
    }

    for (const ch of challenges) {
        // å¼ºåˆ¶è®¾ç½® isEnabled: trueï¼Œå¹¶æ›´æ–°é¢˜ç›®
        await enableChallenge(ch.id); 
    }

    console.log("\nğŸ‰ Game ID 2 ä¸‹çš„æ‰€æœ‰é¢˜ç›®å·²å¤„ç†å®Œæˆï¼");
}

// æ‰§è¡Œå¯ç”¨å‡½æ•°
enableAllChallengesInGame();
```


### upload-labsæ‰¹é‡ä¸Šé¢˜

```javascript
// ==========================================================
// ğŸš€ Upload Labs é¶åœºæ‰¹é‡å¯¼å…¥è„šæœ¬ (Game ID 4)
// ==========================================================

// 1ï¸âƒ£ ä¿®æ”¹åŸºç¡€ URL å’Œ Game ID
// æ³¨æ„ï¼šbaseUrl ç°åœ¨æŒ‡å‘ http://192.168.219.143/api/edit/games/4/challenges
const baseUrl = "http://192.168.219.143/api/edit/games/4/challenges";

// 2ï¸âƒ£ ä¿®æ”¹æ‰€æœ‰é¢˜ç›®åç§° (Pass 01 - Pass 21)
const challengeNames = [
    "pass01", "pass02", "pass03", "pass04", "pass05", "pass06", "pass07", "pass08", "pass09", "pass10",
    "pass11", "pass12", "pass13", "pass14", "pass15", "pass16", "pass17", "pass18", "pass19", "pass20",
    "pass21"
];


// å»¶æ—¶å‡½æ•°
const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));

// 1ï¸âƒ£ åˆ›å»ºé¢˜ç›®
async function createChallenge(title) {
Â  const res = await fetch(baseUrl, {
Â  Â  method: "POST",
Â  Â  headers: { "accept": "application/json, text/plain, */*", "content-type": "application/json" },
Â  Â  credentials: "include",
Â  Â  body: JSON.stringify({ title, category: "Web", type: "DynamicContainer" })
Â  });
  
  // å¢åŠ å®¹é”™ï¼šæ£€æŸ¥åˆ›å»º API çŠ¶æ€
  if (!res.ok) {
    console.error(`âŒ åˆ›å»ºé¢˜ç›® "${title}" å¤±è´¥: ${res.status} ${res.statusText}`);
    throw new Error("Creation failed"); 
  }

Â  const data = await res.json();
Â  console.log(`âœ… å·²åˆ›å»ºé¢˜ç›® "${title}"ï¼ŒID: ${data.id}`);
Â  return data.id;
}

// 2ï¸âƒ£ é…ç½®é¢˜ç›®ä¿¡æ¯
async function updateChallenge(id, title) {
Â  const body = {
Â  Â  id,
Â  Â  title,
Â  Â  content: "",
Â  Â  category: "Web",
Â  Â  type: "DynamicContainer",
Â  Â  hints: [],
Â  Â  flagTemplate: null,
Â  Â  acceptedCount: 0,
Â  Â  fileName: "attachment",
Â  Â  attachment: null,
Â  Â  testContainer: null,
Â  Â  flags: [],
    // 3ï¸âƒ£ ä¿®æ”¹é•œåƒåœ°å€ï¼šé€‚é… nudttan91/upload_labs_gzctf
Â  Â  containerImage: `nudttan91/upload_labs_gzctf:${title}`, 
Â  Â  memoryLimit: 64,
Â  Â  cpuCount: 1,
Â  Â  storageLimit: 256,
Â  Â  containerExposePort: 80,
Â  Â  enableTrafficCapture: false,
Â  Â  disableBloodBonus: false,
Â  Â  submissionLimit: 0,
Â  Â  originalScore: 1000,
Â  Â  minScoreRate: 0.25,
Â  Â  difficulty: 5
Â  };

Â  const res = await fetch(`${baseUrl}/${id}`, {
Â  Â  method: "PUT",
Â  Â  headers: { "accept": "application/json, text/plain, */*", "content-type": "application/json" },
Â  Â  credentials: "include",
Â  Â  body: JSON.stringify(body)
Â  });

  if (!res.ok) {
    console.error(`âŒ æ›´æ–°é¢˜ç›® "${title}" (ID: ${id}) å¤±è´¥: ${res.status} ${res.statusText}`);
    throw new Error("Update failed");
  }

Â  console.log(`âš™ å·²æ›´æ–°é¢˜ç›® "${title}" çš„è¯¦ç»†ä¿¡æ¯`);
}

// 3ï¸âƒ£ é…ç½® flag æ¨¡æ¿
async function setFlagTemplate(id, flag = "flag{[GUID]}") {
Â  const res = await fetch(`${baseUrl}/${id}`, {
Â  Â  method: "PUT",
Â  Â  headers: { "accept": "application/json, text/plain, */*", "content-type": "application/json" },
Â  Â  credentials: "include",
Â  Â  body: JSON.stringify({ flagTemplate: flag })
Â  });
    
  if (!res.ok) {
    console.error(`âŒ è®¾ç½® Flag æ¨¡æ¿ (ID: ${id}) å¤±è´¥: ${res.status} ${res.statusText}`);
    throw new Error("Flag template failed");
  }

Â  console.log(`ğŸ· å·²ä¸ºé¢˜ç›® ID ${id} è®¾ç½® flag æ¨¡æ¿`);
}

// 4ï¸âƒ£ æ‰¹é‡å¤„ç†
async function batchSetup() {
Â  console.log("--- ğŸš€ Upload Labs é¢˜ç›®æ‰¹é‡å¯¼å…¥å¼€å§‹ (Game ID 4) ---");
Â  for (const name of challengeNames) {
Â  Â  try {
Â  Â  Â  const id = await createChallenge(name);
Â  Â  Â  await sleep(200); // ç­‰å¾… 200ms
Â  Â  Â  await updateChallenge(id, name);
Â  Â  Â  await sleep(200);
Â  Â  Â  await setFlagTemplate(id);
Â  Â  Â  await sleep(200);
Â  Â  } catch (err) {
Â  Â  Â  // æ•è·åˆ°é”™è¯¯åï¼Œè·³è¿‡è¯¥é¢˜ç›®ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª
Â  Â  Â  console.error(`âŒ å¤„ç†é¢˜ç›® "${name}" æ—¶å‘ç”Ÿé”™è¯¯ï¼Œè·³è¿‡è¯¥é¢˜ç›®ã€‚`); 
Â  Â  }
Â  }
Â  console.log("\nğŸ‰ æ‰€æœ‰ Upload Labs é¢˜ç›®å¤„ç†å®Œæˆï¼");
}

// æ‰§è¡Œ
batchSetup();
```

### uploads-lab æ‰¹é‡å¯ç”¨

```javascript
const gameId = 4; // æ¯”èµ›çš„id
const baseUrl = `http://192.168.219.143/api/edit/games`;

async function getAllChallenges() {
    // ä½¿ç”¨æ‚¨å·²éªŒè¯æˆåŠŸçš„é€»è¾‘è·å–æ‰€æœ‰é¢˜ç›®
    const res = await fetch(`${baseUrl}/${gameId}/challenges`, {
        method: 'GET',
        headers: { 'accept': 'application/json, text/plain, */*', },
        credentials: 'include'
    });
    if (!res.ok) {
        console.error('âŒ è·å–é¢˜ç›®åˆ—è¡¨å¤±è´¥:', res.status, res.statusText);
        return [];
    }
    const challenges = await res.json();
    console.log(`âœ… å…±è·å–åˆ° ${challenges.length} ä¸ªé¢˜ç›®ï¼Œå‡†å¤‡æ‰¹é‡å¯ç”¨...`);
    return challenges;
}

async function enableChallenge(challengeId) {
    // å¯ç”¨å•ä¸ªé¢˜ç›®çš„ API åœ°å€æ˜¯ï¼š/api/edit/challenges/{challengeId}ï¼Œå®ƒç‹¬ç«‹äº GameIdã€‚
    // GZCTF çš„ PUT /api/edit/games/{gameId}/challenges/{challengeId} æ˜¯æ›´æ–°é¢˜ç›®å±æ€§çš„ç«¯ç‚¹ã€‚
    // ä¸ºäº†å¯ç”¨ï¼Œæˆ‘ä»¬å‘é€ isEnabled: true
    const enableUrl = `${baseUrl}/${gameId}/challenges/${challengeId}`;

    const res = await fetch(enableUrl, {
        method: "PUT",
        headers: {
            "accept": "application/json, text/plain, */*",
            "content-type": "application/json"
        },
        // å¯ç”¨é¢˜ç›®ï¼šisEnabled: true
        body: JSON.stringify({ isEnabled: true }), 
        credentials: "include"
    });

    if (res.ok) {
        console.log(`âœ… é¢˜ç›® ID: ${challengeId} å·²å¯ç”¨ã€‚`);
    } else {
        console.error(`âŒ é¢˜ç›® ID: ${challengeId} å¯ç”¨å¤±è´¥ã€‚çŠ¶æ€ç : ${res.status}`);
    }
}

async function enableAllChallengesInGame() {
    const challenges = await getAllChallenges();

    if (challenges.length === 0) {
        console.log("ğŸš« æ— é¢˜ç›®å¯å¯ç”¨ã€‚");
        return;
    }

    for (const ch of challenges) {
        // å¼ºåˆ¶è®¾ç½® isEnabled: trueï¼Œå¹¶æ›´æ–°é¢˜ç›®
        await enableChallenge(ch.id); 
    }

    console.log("\nğŸ‰ Game ID "+gameId+" ä¸‹çš„æ‰€æœ‰é¢˜ç›®å·²å¤„ç†å®Œæˆï¼");
}

// æ‰§è¡Œå¯ç”¨å‡½æ•°
enableAllChallengesInGame();
```


## æ”¶å°¾

æ¸…é™¤å‘½ä»¤å†å²è®°å½•

```bash
shred -u /root/.bash_history
shred -u /home/welcome/.bash_history
history -cw
```